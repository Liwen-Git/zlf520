webpackJsonp([2],{JuqU:function(t,s){},"e+iX":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"arertInput",class:t.showInput?"active":""},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.verify_code,expression:"verify_code"}],attrs:{type:"text",placeholder:"请输入核销码"},domProps:{value:t.verify_code},on:{input:function(s){s.target.composing||(t.verify_code=s.target.value)}}}),t._v(" "),e("div",{staticClass:"text"},[t._v("仅支持一次核销订单全部消费码")]),t._v(" "),e("mt-button",{staticStyle:{width:"100%","background-color":"#4a57ff","margin-top":".9rem"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("核销")])],1)},staticRenderFns:[]};var a=e("VU/8")({props:{showInput:{default:!1}},data:function(){return{verify_code:""}},methods:{submit:function(){var t={num:1,verify_code:this.verify_code};this.$emit("submit",t)}}},i,!1,function(t){e("xWIP")},"data-v-6484cc68",null).exports,n=e("vLgD"),o=e("mw3O"),c=e.n(o);var r={props:{showConsumption:{default:!1},verify_code:{default:""}},data:function(){return{}},methods:{submit:function(){var t,s=this;(t={verify_code:this.verify_code},Object(n.a)({transformRequest:[function(t){return c.a.stringify(t)}],headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},url:"/api/app/merchant/order/verification",method:"post",data:t})).then(function(t){s.$emit("submit",1)})}}},u={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"arertInput",class:t.showConsumption?"active":""},[e("div",{staticClass:"test"},[t._v("请确认用户是否已消费")]),t._v(" "),e("div",{staticClass:"btn"},[e("div",{staticClass:"colse",on:{click:function(s){t.$emit("cance")}}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"submit",on:{click:t.submit}},[t._v("确定")])])])},staticRenderFns:[]};var l=e("VU/8")(r,u,!1,function(t){e("n/6o")},"data-v-3ef3f719",null).exports,v=(e("mtWM"),e("DHfu")),d={data:function(){return{stateNum:1,moreShow:!1,activeIndex:-1,showInput:!1,showConsumption:!1,page_size:10,page:1,verify_status:1,status:[],type:"",list:[],total:0,busy:!1,busy1:!0,loadShow:!0,touchstart:0,verify_code:""}},components:{arertInput:a,consumption:l,scroll:scroll},created:function(){var t=this;Object(v.b)(this),setTimeout(function(){t.getOrderList()},500),window.addEventListener("scroll",this.scrollFunc)},mounted:function(){},methods:{scrollFunc:function(t){var s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;s+(document.documentElement.clientHeight||document.body.clientHeight)>=(document.documentElement.scrollHeight||document.body.scrollHeight)&&!this.busy&&10*this.page<this.total&&this.loadMore(),!this.busy1&&s<=0&&(this.page=1,this.busy1=!0,this.getOrderList())},verification:function(){},loadMore:function(){this.busy=!0,this.page++,this.getOrderList()},getOrderList:function(){var t,s=this;(t={page_size:this.page_size,page:this.page,verify_status:this.verify_status,status:this.status,type:this.type},Object(n.a)({url:"/api/app/merchant/orders",method:"get",params:t})).then(function(t){1==s.page?(s.list=t.data.list,s.total=t.data.total):(s.list=s.list.concat(t.data.list),s.total=t.data.total),setTimeout(function(){s.busy=!1,s.busy1=!1},500)})},colse:function(){this.showConsumption=!1,this.showInput=!1},changeState:function(t){1==t?(this.verify_status=1,this.status=""):(this.verify_status="",this.status=[6,7]),this.page=1,this.getOrderList()},changeMoreShow:function(t){this.activeIndex=t},changeShp:function(){this.showInput=!0},writeOff:function(t){this.showInput=!1,this.verify_code=t.verify_code,this.showConsumption=!0},consumptionTrue:function(){this.showConsumption=!1,this.page=1,this.getOrderList()},telPhone:function(t){console.log(t),Object(v.e)(t)},goback:function(){Object(v.c)()}}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"order",attrs:{id:"order"}},[e("mt-header",{staticStyle:{height:".88rem","background-color":"#fafafa",color:"#000"},attrs:{title:"订单管理"}},[e("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.goback},slot:"left"})],1),t._v(" "),e("div",{staticClass:"table_nav"},[e("div",{class:1==t.verify_status?"active":"",on:{click:function(s){t.changeState(1)}}},[t._v("未核销")]),t._v(" "),e("div",{class:1!=t.verify_status?"active":"",on:{click:function(s){t.changeState(2)}}},[t._v("已完成")])]),t._v(" "),e("div",{staticClass:"content"},[t.busy1?e("div",{staticClass:"loading"},[e("img",{attrs:{src:t.ImgUrl+"home/loading.gif",alt:""}})]):t._e(),t._v(" "),t._l(t.list,function(s,i){return e("div",{key:i,staticClass:"item_order"},[e("div",{staticClass:"hander_order"},[e("div",{staticClass:"hander_top"},[e("div",{staticClass:"hander_time"},[1==s.type?e("div",{staticClass:"tuan"},[t._v("团")]):t._e(),t._v(" "),3==s.type&&1!=t.verify_status?e("div",{staticClass:"dan"},[t._v("单")]):t._e(),t._v(" "),2==s.type?e("div",{staticClass:"mai"},[t._v("买")]):t._e(),t._v(" "),e("div",{staticClass:"time"},[t._v("下单时间："+t._s(s.created_at))])]),t._v(" "),e("div",{staticClass:"order_state"},[7==s.status?e("span",[t._v("已完成")]):t._e(),t._v(" "),6==s.status?e("span",[t._v("已退款")]):t._e(),t._v(" "),7!=s.status&&6!=s.status?e("span",{staticClass:"hexiao",on:{click:t.changeShp}},[t._v("核销")]):t._e()])])]),t._v(" "),e("div",{staticClass:"price",class:0==s.dishes_items.length?"active1":""},[e("div",{staticClass:"user_price"},[e("div",{staticClass:"user_price_left"},[e("img",{attrs:{src:s.user.avatar_url,alt:""}}),t._v(" "),e("div",[t._v(t._s(s.user.name))])]),t._v(" "),e("div",{staticClass:"user_price_right"},[t._v("\n                      实付：￥"+t._s(s.pay_price)+"\n                  ")])]),t._v(" "),1==s.type?e("ul",{staticClass:"meal_order"},[e("li",[e("div",{staticClass:"meal_name"},[e("span",[t._v(t._s(s.goods_name))]),t._v(" "),e("span",[t._v("￥"+t._s(s.pay_price)+"(×"+t._s(s.buy_number)+")")])])])]):t._e(),t._v(" "),3==s.type&&1!=t.verify_status?e("ul",{staticClass:"product_order"},t._l(s.dishes_items,function(s,a){return 0==a||t.activeIndex==i?e("li",{key:a},[e("span",[t._v(t._s(s.dishes_goods_name))]),t._v(" "),e("span",[t._v("￥"+t._s(s.dishes_goods_sale_price)+"(×"+t._s(s.number)+")")])]):t._e()})):t._e(),t._v(" "),s.dishes_items.length>1?e("div",{staticClass:"see_more"},[e("div",{staticClass:"more"},[t.activeIndex==i?e("span",{on:{click:function(s){t.changeMoreShow(-1)}}},[t._v("收起更多")]):t._e(),t._v(" "),t.activeIndex!=i?e("span",{on:{click:function(s){t.changeMoreShow(i)}}},[t._v("查看更多 ")]):t._e(),t._v(" "),e("img",{class:t.activeIndex==i?"active":"",attrs:{src:t.ImgUrl+"home/more.png"}})])]):t._e()]),t._v(" "),e("div",{staticClass:"order_num"},[e("span",[t._v("订单号："+t._s(s.order_no))]),t._v(" "),e("img",{attrs:{src:t.ImgUrl+"home/phone.png"},on:{click:function(e){t.telPhone(s.notify_mobile)}}})])])}),t._v(" "),t.busy?e("div",{staticClass:"loading"},[e("img",{attrs:{src:t.ImgUrl+"home/loading.gif",alt:""}})]):t._e(),t._v(" "),10*t.page>t.total?e("div",{staticClass:"di"},[t._v("一一 我是有底线的 一一")]):t._e()],2),t._v(" "),t.showInput||t.showConsumption?e("div",{staticClass:"mrsk",on:{click:t.colse}}):t._e(),t._v(" "),e("arertInput",{attrs:{showInput:t.showInput},on:{submit:t.writeOff}}),t._v(" "),e("consumption",{attrs:{showConsumption:t.showConsumption,verify_code:t.verify_code},on:{cance:function(s){t.showConsumption=!1},submit:t.consumptionTrue}})],1)},staticRenderFns:[]};var h=e("VU/8")(d,_,!1,function(t){e("JuqU")},"data-v-7b228cab",null);s.default=h.exports},"n/6o":function(t,s){},xWIP:function(t,s){}});
//# sourceMappingURL=2.2dbef3c04d758b553f6d.js.map